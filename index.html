<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock & Mineral of the Day</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const Loader2 = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
            </svg>
        );

        const RockOfTheDay = () => {
            const [rockData, setRockData] = useState(null);
            const [mineralData, setMineralData] = useState(null);
            const [loading, setLoading] = useState(true);

            // Curated lists of rocks and minerals with fallback descriptions
            const rocks = [
                { name: "Granite", desc: "A coarse-grained intrusive igneous rock composed mainly of quartz, feldspar, and mica. Widely used as a construction and decorative stone." },
                { name: "Basalt", desc: "A dark, fine-grained volcanic rock that makes up most of the ocean floor. Forms from rapidly cooled lava." },
                { name: "Sandstone", desc: "A sedimentary rock composed mainly of sand-sized mineral particles or rock fragments." },
                { name: "Limestone", desc: "A sedimentary rock composed largely of calcite. Forms from marine organisms and chemical precipitation." },
                { name: "Marble", desc: "A metamorphic rock formed from limestone under heat and pressure. Prized for sculpture and architecture." },
                { name: "Slate", desc: "A fine-grained metamorphic rock that splits into thin sheets. Used for roofing and flooring." },
                { name: "Schist", desc: "A medium-grade metamorphic rock with visible mineral grains aligned in parallel layers." },
                { name: "Gneiss", desc: "A high-grade metamorphic rock with alternating light and dark bands. Very hard and durable." },
                { name: "Obsidian", desc: "Volcanic glass formed from rapidly cooled lava. Sharp edges made it valuable for tools and weapons." },
                { name: "Pumice", desc: "A vesicular volcanic rock so full of gas bubbles that it can float on water." },
                { name: "Andesite", desc: "An intermediate volcanic rock named after the Andes Mountains where it's common." },
                { name: "Rhyolite", desc: "A fine-grained volcanic rock with high silica content. The volcanic equivalent of granite." },
                { name: "Shale", desc: "A fine-grained sedimentary rock formed from clay and silt. The most common sedimentary rock." },
                { name: "Conglomerate", desc: "A sedimentary rock composed of rounded pebbles and cobbles cemented together." },
                { name: "Breccia", desc: "Similar to conglomerate but composed of angular rock fragments cemented together." },
                { name: "Diorite", desc: "An intrusive igneous rock intermediate in composition between granite and gabbro." },
                { name: "Gabbro", desc: "A coarse-grained intrusive igneous rock, the plutonic equivalent of basalt." },
                { name: "Peridotite", desc: "A dense, coarse-grained igneous rock composed mainly of olivine and pyroxene." },
                { name: "Dunite", desc: "An ultramafic rock composed almost entirely of olivine." },
                { name: "Tuff", desc: "A rock formed from consolidated volcanic ash." },
                { name: "Mudstone", desc: "A fine-grained sedimentary rock composed of clay and silt particles." },
                { name: "Siltstone", desc: "A sedimentary rock composed mainly of silt-sized particles." },
                { name: "Quartzite", desc: "A hard metamorphic rock formed from sandstone. Very resistant to weathering." },
                { name: "Anthracite", desc: "The highest grade of coal. Very hard and has the highest carbon content." },
                { name: "Bituminous coal", desc: "A relatively soft coal containing a tar-like substance called bitumen. The most abundant type of coal." },
                { name: "Lignite", desc: "A soft brownish coal showing traces of plant structure. The lowest grade of coal." },
                { name: "Dolomite rock", desc: "A sedimentary carbonate rock composed primarily of the mineral dolomite." },
                { name: "Chert", desc: "A hard, fine-grained sedimentary rock composed of microcrystalline quartz." },
                { name: "Phyllite", desc: "A metamorphic rock intermediate between slate and schist with a silky sheen." },
                { name: "Migmatite", desc: "A high-grade metamorphic rock showing both igneous and metamorphic characteristics." }
            ];

            const minerals = [
                { name: "Quartz", desc: "One of the most abundant minerals in Earth's crust. Composed of silicon and oxygen, it's very hard and comes in many varieties." },
                { name: "Feldspar", desc: "The most abundant mineral group in Earth's crust, comprising about 60% of terrestrial rocks." },
                { name: "Calcite", desc: "A carbonate mineral and the main component of limestone and marble. Reacts with dilute acid." },
                { name: "Gypsum", desc: "A soft sulfate mineral used to make plaster of Paris and drywall. Can form large transparent crystals." },
                { name: "Halite", desc: "Rock salt. Forms from evaporation of seawater. Essential for human life and historically valuable for trade." },
                { name: "Pyrite", desc: "Known as 'fool's gold' for its metallic luster and pale brass-yellow color. An iron sulfide mineral." },
                { name: "Magnetite", desc: "A black magnetic iron oxide. The most magnetic of all naturally occurring minerals on Earth." },
                { name: "Hematite", desc: "The main ore of iron. Named from the Greek word for blood due to its red color when powdered." },
                { name: "Garnet", desc: "A group of silicate minerals used as gemstones and abrasives. Commonly deep red but can be many colors." },
                { name: "Olivine", desc: "A green silicate mineral common in Earth's mantle. The gem variety is called peridot." },
                { name: "Mica", desc: "A group of silicate minerals known for their perfect sheet-like cleavage and flexibility." },
                { name: "Talc", desc: "The softest mineral (hardness 1 on Mohs scale). Used in cosmetics and as a lubricant." },
                { name: "Fluorite", desc: "A colorful halide mineral that fluoresces under UV light. Used in optics and metallurgy." },
                { name: "Apatite", desc: "A group of phosphate minerals. The main component of tooth enamel and bones." },
                { name: "Orthoclase", desc: "A common potassium feldspar mineral. An important component of granite." },
                { name: "Plagioclase", desc: "A series of sodium-calcium feldspar minerals. Very common in igneous rocks." },
                { name: "Hornblende", desc: "A dark amphibole mineral common in igneous and metamorphic rocks." },
                { name: "Augite", desc: "A black or dark green pyroxene mineral common in basalt and gabbro." },
                { name: "Serpentine", desc: "A group of green minerals formed by alteration of olivine and pyroxene. Often used as decorative stone." },
                { name: "Kaolinite", desc: "A white clay mineral used in ceramics and paper manufacturing." },
                { name: "Chalcopyrite", desc: "The most abundant copper ore mineral. Has a brass-yellow color." },
                { name: "Galena", desc: "The primary ore of lead. Forms cubic crystals with perfect cleavage." },
                { name: "Sphalerite", desc: "The primary ore of zinc. Can be various colors but often brown or black." },
                { name: "Barite", desc: "A heavy sulfate mineral used in drilling mud and as a source of barium." },
                { name: "Graphite", desc: "A soft form of carbon used in pencils and lubricants. The most stable form of carbon under standard conditions." },
                { name: "Diamond", desc: "The hardest natural substance. A form of carbon crystallized under extreme pressure and temperature." },
                { name: "Corundum", desc: "The second hardest mineral after diamond. Includes ruby and sapphire varieties." },
                { name: "Beryl", desc: "A beryllium silicate mineral. Gem varieties include emerald and aquamarine." },
                { name: "Topaz", desc: "A hard silicate mineral often used as a gemstone. Can be many colors." },
                { name: "Tourmaline", desc: "A complex boron silicate mineral that comes in many colors. Often used as a gemstone." },
                { name: "Zircon", desc: "A zirconium silicate mineral used in geochronology and as a gemstone." },
                { name: "Amphibole", desc: "A group of dark silicate minerals important in igneous and metamorphic rocks." },
                { name: "Chlorite", desc: "A green sheet silicate mineral common in low-grade metamorphic rocks." },
                { name: "Epidote", desc: "A green calcium aluminum silicate mineral common in metamorphic rocks." },
                { name: "Dolomite", desc: "A carbonate mineral similar to limestone but contains magnesium. Used as a source of magnesia." }
            ];

            // Get today's rock based on day of year
            const getDayOfYear = () => {
                const now = new Date();
                const start = new Date(now.getFullYear(), 0, 0);
                const diff = now - start;
                const oneDay = 1000 * 60 * 60 * 24;
                return Math.floor(diff / oneDay);
            };

            const getTodaysSpecimens = () => {
                const dayOfYear = getDayOfYear();
                const rockIndex = dayOfYear % rocks.length;
                const mineralIndex = dayOfYear % minerals.length;
                return {
                    rock: rocks[rockIndex],
                    mineral: minerals[mineralIndex]
                };
            };

            useEffect(() => {
                const fetchSpecimenData = async (specimen, isRock) => {
                    const specimenName = specimen.name;
                    
                    // Set fallback data
                    const fallbackData = {
                        title: specimenName,
                        extract: specimen.desc,
                        thumbnail: null,
                        url: `https://en.wikipedia.org/wiki/${encodeURIComponent(specimenName)}`,
                        usingFallback: true
                    };
                    
                    try {
                        // Try to fetch from Wikipedia API
                        const params = new URLSearchParams({
                            action: 'query',
                            format: 'json',
                            prop: 'extracts|pageimages',
                            exintro: true,
                            explaintext: true,
                            piprop: 'thumbnail|original',
                            pithumbsize: 800,
                            titles: specimenName,
                            origin: '*',
                            redirects: 1
                        });
                        
                        const controller = new AbortController();
                        const timeoutId = setTimeout(() => controller.abort(), 5000);
                        
                        const response = await fetch(
                            `https://en.wikipedia.org/w/api.php?${params}`,
                            { signal: controller.signal }
                        );
                        
                        clearTimeout(timeoutId);
                        
                        if (!response.ok) {
                            throw new Error('Wikipedia API unavailable');
                        }
                        
                        const data = await response.json();
                        const pages = data.query.pages;
                        const pageId = Object.keys(pages)[0];
                        const pageData = pages[pageId];
                        
                        if (pageId === '-1' || !pageData.extract) {
                            return fallbackData;
                        } else {
                            return {
                                title: pageData.title,
                                extract: pageData.extract,
                                thumbnail: pageData.thumbnail,
                                url: `https://en.wikipedia.org/wiki/${encodeURIComponent(specimenName)}`,
                                usingFallback: false
                            };
                        }
                    } catch (err) {
                        console.log('Using fallback data:', err.message);
                        return fallbackData;
                    }
                };

                const fetchAllData = async () => {
                    setLoading(true);
                    
                    const todaysSpecimens = getTodaysSpecimens();
                    
                    const [rock, mineral] = await Promise.all([
                        fetchSpecimenData(todaysSpecimens.rock, true),
                        fetchSpecimenData(todaysSpecimens.mineral, false)
                    ]);
                    
                    setRockData(rock);
                    setMineralData(mineral);
                    setLoading(false);
                };

                fetchAllData();
            }, []);

            if (loading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-800 to-slate-900 flex items-center justify-center">
                        <div className="text-center">
                            <Loader2 className="w-12 h-12 text-cyan-400 animate-spin mx-auto mb-4" />
                            <p className="text-slate-300 text-lg">Loading today's specimen...</p>
                        </div>
                    </div>
                );
            }

            const formatDate = () => {
                return new Date().toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-800 to-slate-900 p-4 md:p-8">
                    <div className="max-w-4xl mx-auto">
                        {/* Header */}
                        <div className="text-center mb-8">
                            <h1 className="text-4xl md:text-5xl font-bold text-cyan-400 mb-2">
                                ðŸª¨ Rock & Mineral of the Day
                            </h1>
                            <p className="text-slate-300 text-lg">{formatDate()}</p>
                        </div>

                        {/* Rock Card */}
                        <div className="mb-8">
                            <h2 className="text-2xl font-bold text-cyan-300 mb-4 flex items-center gap-2">
                                <span className="text-3xl">ðŸª¨</span> Today's Rock
                            </h2>
                            <div className="bg-slate-700/50 backdrop-blur rounded-xl shadow-2xl overflow-hidden border border-slate-600">
                                {/* Image Section */}
                                {rockData.thumbnail && (
                                    <div className="relative h-64 md:h-96 bg-slate-900">
                                        <img 
                                            src={rockData.thumbnail.source} 
                                            alt={rockData.title}
                                            className="w-full h-full object-contain p-4"
                                        />
                                    </div>
                                )}

                                {/* Content Section */}
                                <div className="p-6 md:p-8">
                                    <h3 className="text-3xl md:text-4xl font-bold text-cyan-300 mb-4">
                                        {rockData.title}
                                    </h3>
                                    
                                    <div className="prose prose-invert max-w-none">
                                        <p className="text-slate-200 text-lg leading-relaxed mb-6">
                                            {rockData.extract}
                                        </p>
                                    </div>

                                    {/* Footer */}
                                    <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 pt-6 border-t border-slate-600">
                                        <div className="text-slate-400 text-sm">
                                            Data sourced from Wikipedia
                                        </div>
                                        <a 
                                            href={rockData.url}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            className="bg-cyan-500 hover:bg-cyan-600 text-slate-900 font-semibold px-6 py-2 rounded-lg transition-colors duration-200"
                                        >
                                            Learn More on Wikipedia
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Mineral Card */}
                        <div className="mb-8">
                            <h2 className="text-2xl font-bold text-emerald-300 mb-4 flex items-center gap-2">
                                <span className="text-3xl">ðŸ’Ž</span> Today's Mineral
                            </h2>
                            <div className="bg-slate-700/50 backdrop-blur rounded-xl shadow-2xl overflow-hidden border border-slate-600">
                                {/* Image Section */}
                                {mineralData.thumbnail && (
                                    <div className="relative h-64 md:h-96 bg-slate-900">
                                        <img 
                                            src={mineralData.thumbnail.source} 
                                            alt={mineralData.title}
                                            className="w-full h-full object-contain p-4"
                                        />
                                    </div>
                                )}

                                {/* Content Section */}
                                <div className="p-6 md:p-8">
                                    <h3 className="text-3xl md:text-4xl font-bold text-emerald-300 mb-4">
                                        {mineralData.title}
                                    </h3>
                                    
                                    <div className="prose prose-invert max-w-none">
                                        <p className="text-slate-200 text-lg leading-relaxed mb-6">
                                            {mineralData.extract}
                                        </p>
                                    </div>

                                    {/* Footer */}
                                    <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 pt-6 border-t border-slate-600">
                                        <div className="text-slate-400 text-sm">
                                            Data sourced from Wikipedia
                                        </div>
                                        <a 
                                            href={mineralData.url}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            className="bg-emerald-500 hover:bg-emerald-600 text-slate-900 font-semibold px-6 py-2 rounded-lg transition-colors duration-200"
                                        >
                                            Learn More on Wikipedia
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* Info Box */}
                        <div className="mt-6 bg-slate-700/30 rounded-lg p-4 text-center">
                            <p className="text-slate-300 text-sm">
                                A new rock and mineral appear each day. Come back tomorrow for more specimens!
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<RockOfTheDay />, document.getElementById('root'));
    </script>
</body>
</html>
